<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:local="clr-namespace:SemiconductorControlApp">

    <!-- 半导体设备节点样式 -->
    <Style TargetType="{x:Type local:SemiconductorNode}">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type local:SemiconductorNode}">
                    <Border x:Name="NodeBorder"
                            Background="{TemplateBinding Background}"
                            BorderBrush="{TemplateBinding BorderBrush}"
                            BorderThickness="2"
                            CornerRadius="5"
                            Padding="5">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="*"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>
                            
                            <!-- 设备名称 -->
                            <TextBlock Grid.Row="0"
                                       Text="{Binding Device.DeviceName, RelativeSource={RelativeSource TemplatedParent}}"
                                       FontWeight="Bold"
                                       FontSize="12"
                                       HorizontalAlignment="Center"
                                       Foreground="White"/>
                            
                            <!-- 设备图标区域 -->
                            <Grid Grid.Row="1" Margin="5">
                                <Ellipse x:Name="DeviceIcon"
                                         Fill="White"
                                         Width="30"
                                         Height="30"/>
                                <TextBlock Text="{Binding Device.DeviceType, RelativeSource={RelativeSource TemplatedParent}}"
                                           HorizontalAlignment="Center"
                                           VerticalAlignment="Center"
                                           FontSize="8"
                                           FontWeight="Bold"/>
                            </Grid>
                            
                            <!-- 当前值显示 -->
                            <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Center">
                                <TextBlock Text="当前: " FontSize="10" Foreground="White"/>
                                <TextBlock Text="{Binding Device.CurrentValue, RelativeSource={RelativeSource TemplatedParent}, StringFormat=F2}"
                                           FontSize="10" FontWeight="Bold" Foreground="Yellow"/>
                                <TextBlock Text="{Binding Device.Unit, RelativeSource={RelativeSource TemplatedParent}}"
                                           FontSize="10" Foreground="White" Margin="2,0,0,0"/>
                            </StackPanel>
                            
                            <!-- 状态指示器 -->
                            <Grid Grid.Row="3" Margin="0,2,0,0">
                                <Rectangle x:Name="StatusIndicator"
                                           Height="4"
                                           Fill="Gray"
                                           RadiusX="2"
                                           RadiusY="2"/>
                            </Grid>
                        </Grid>
                    </Border>
                    
                    <ControlTemplate.Triggers>
                        <!-- 设备类型样式 -->
                        <DataTrigger Binding="{Binding Device.DeviceType, RelativeSource={RelativeSource Self}}" Value="Pump">
                            <Setter TargetName="NodeBorder" Property="Background" Value="#FF2196F3"/>
                            <Setter TargetName="NodeBorder" Property="BorderBrush" Value="#FF1976D2"/>
                        </DataTrigger>
                        <DataTrigger Binding="{Binding Device.DeviceType, RelativeSource={RelativeSource Self}}" Value="Valve">
                            <Setter TargetName="NodeBorder" Property="Background" Value="#FF4CAF50"/>
                            <Setter TargetName="NodeBorder" Property="BorderBrush" Value="#FF388E3C"/>
                        </DataTrigger>
                        <DataTrigger Binding="{Binding Device.DeviceType, RelativeSource={RelativeSource Self}}" Value="Sensor">
                            <Setter TargetName="NodeBorder" Property="Background" Value="#FFFF9800"/>
                            <Setter TargetName="NodeBorder" Property="BorderBrush" Value="#FFF57C00"/>
                        </DataTrigger>
                        <DataTrigger Binding="{Binding Device.DeviceType, RelativeSource={RelativeSource Self}}" Value="Heater">
                            <Setter TargetName="NodeBorder" Property="Background" Value="#FFF44336"/>
                            <Setter TargetName="NodeBorder" Property="BorderBrush" Value="#FFD32F2F"/>
                        </DataTrigger>
                        <DataTrigger Binding="{Binding Device.DeviceType, RelativeSource={RelativeSource Self}}" Value="Chamber">
                            <Setter TargetName="NodeBorder" Property="Background" Value="#FF9C27B0"/>
                            <Setter TargetName="NodeBorder" Property="BorderBrush" Value="#FF7B1FA2"/>
                        </DataTrigger>
                        <DataTrigger Binding="{Binding Device.DeviceType, RelativeSource={RelativeSource Self}}" Value="Controller">
                            <Setter TargetName="NodeBorder" Property="Background" Value="#FF607D8B"/>
                            <Setter TargetName="NodeBorder" Property="BorderBrush" Value="#FF455A64"/>
                        </DataTrigger>
                        
                        <!-- 设备状态样式 -->
                        <DataTrigger Binding="{Binding Device.Status, RelativeSource={RelativeSource Self}}" Value="Idle">
                            <Setter TargetName="StatusIndicator" Property="Fill" Value="Gray"/>
                        </DataTrigger>
                        <DataTrigger Binding="{Binding Device.Status, RelativeSource={RelativeSource Self}}" Value="Running">
                            <Setter TargetName="StatusIndicator" Property="Fill" Value="LimeGreen"/>
                        </DataTrigger>
                        <DataTrigger Binding="{Binding Device.Status, RelativeSource={RelativeSource Self}}" Value="Error">
                            <Setter TargetName="StatusIndicator" Property="Fill" Value="Red"/>
                        </DataTrigger>
                        <DataTrigger Binding="{Binding Device.Status, RelativeSource={RelativeSource Self}}" Value="Maintenance">
                            <Setter TargetName="StatusIndicator" Property="Fill" Value="Orange"/>
                        </DataTrigger>
                        
                        <!-- 选中状态 -->
                        <Trigger Property="IsSelected" Value="True">
                            <Setter TargetName="NodeBorder" Property="BorderThickness" Value="3"/>
                            <Setter TargetName="NodeBorder" Property="Effect">
                                <Setter.Value>
                                    <DropShadowEffect Color="Yellow" BlurRadius="10" ShadowDepth="0"/>
                                </Setter.Value>
                            </Setter>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
        
        <!-- 默认尺寸 -->
        <Setter Property="Width" Value="120"/>
        <Setter Property="Height" Value="80"/>
        <Setter Property="Cursor" Value="Hand"/>
    </Style>

    <!-- 流程连接线样式 - 简化版本 -->
    <Style x:Key="ProcessConnectionStyle" TargetType="{x:Type Line}">
        <Setter Property="Stroke" Value="#FF2196F3"/>
        <Setter Property="StrokeThickness" Value="3"/>
    </Style>

    <!-- 流程状态面板样式 -->
    <Style x:Key="ProcessStatusPanelStyle" TargetType="{x:Type Border}">
        <Setter Property="Background" Value="#FF37474F"/>
        <Setter Property="BorderBrush" Value="#FF607D8B"/>
        <Setter Property="BorderThickness" Value="1"/>
        <Setter Property="CornerRadius" Value="5"/>
        <Setter Property="Padding" Value="10"/>
        <Setter Property="Margin" Value="5"/>
    </Style>

    <!-- 设备参数输入框样式 -->
    <Style x:Key="ParameterInputStyle" TargetType="{x:Type TextBox}">
        <Setter Property="Background" Value="#FF455A64"/>
        <Setter Property="Foreground" Value="White"/>
        <Setter Property="BorderBrush" Value="#FF607D8B"/>
        <Setter Property="BorderThickness" Value="1"/>
        <Setter Property="Padding" Value="5"/>
        <Setter Property="FontSize" Value="12"/>
        
        <Style.Triggers>
            <Trigger Property="IsFocused" Value="True">
                <Setter Property="BorderBrush" Value="#FF2196F3"/>
                <Setter Property="BorderThickness" Value="2"/>
            </Trigger>
            <Trigger Property="Validation.HasError" Value="True">
                <Setter Property="BorderBrush" Value="Red"/>
                <Setter Property="BorderThickness" Value="2"/>
            </Trigger>
        </Style.Triggers>
    </Style>

    <!-- 流程控制按钮样式 -->
    <Style x:Key="ProcessControlButtonStyle" TargetType="{x:Type Button}">
        <Setter Property="Background" Value="#FF2196F3"/>
        <Setter Property="Foreground" Value="White"/>
        <Setter Property="BorderBrush" Value="#FF1976D2"/>
        <Setter Property="BorderThickness" Value="1"/>
        <Setter Property="Padding" Value="10,5"/>
        <Setter Property="Margin" Value="2"/>
        <Setter Property="FontWeight" Value="Bold"/>
        <Setter Property="Cursor" Value="Hand"/>
        
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type Button}">
                    <Border Background="{TemplateBinding Background}"
                            BorderBrush="{TemplateBinding BorderBrush}"
                            BorderThickness="{TemplateBinding BorderThickness}"
                            CornerRadius="3"
                            Padding="{TemplateBinding Padding}">
                        <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                    </Border>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsMouseOver" Value="True">
                            <Setter Property="Background" Value="#FF1976D2"/>
                        </Trigger>
                        <Trigger Property="IsPressed" Value="True">
                            <Setter Property="Background" Value="#FF0D47A1"/>
                        </Trigger>
                        <Trigger Property="IsEnabled" Value="False">
                            <Setter Property="Background" Value="#FF9E9E9E"/>
                            <Setter Property="Foreground" Value="#FF616161"/>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <!-- 紧急停止按钮样式 -->
    <Style x:Key="EmergencyStopButtonStyle" TargetType="{x:Type Button}" BasedOn="{StaticResource ProcessControlButtonStyle}">
        <Setter Property="Background" Value="#FFF44336"/>
        <Setter Property="BorderBrush" Value="#FFD32F2F"/>
        
        <Style.Triggers>
            <Trigger Property="IsMouseOver" Value="True">
                <Setter Property="Background" Value="#FFD32F2F"/>
            </Trigger>
            <Trigger Property="IsPressed" Value="True">
                <Setter Property="Background" Value="#FFB71C1C"/>
            </Trigger>
        </Style.Triggers>
    </Style>

    <!-- 数据转换器 -->
    <local:DeviceStatusToColorConverter x:Key="StatusToColorConverter"/>
    <local:BooleanToVisibilityConverter x:Key="BoolToVisibilityConverter"/>
    <local:ProcessStatusToStringConverter x:Key="ProcessStatusToStringConverter"/>
    <local:NumberToStringConverter x:Key="NumberToStringConverter"/>
    <local:DeviceTypeToIconConverter x:Key="DeviceTypeToIconConverter"/>
    <local:MultiValueToStringConverter x:Key="MultiValueToStringConverter"/>

</ResourceDictionary>